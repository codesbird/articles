<html>
</head>

<body>

    <!-- 1. Your input URL -->
    <input type="text" id="yt-url" placeholder="Paste YouTube link here" style="width: 400px;"
        value="https://www.youtube.com/watch?v=w_OzrsE35qQ" />
    <button id="embed-btn">Embed Video</button>

    <!-- 2. Container for the generated iframe -->
    <div id="yt-embed-holder" style="margin-top: 1em;display: nsone;"></div>

    <script>
        /**
         * Given a full YouTube URL, extract the v, list, and index params.
         * Returns an object { videoId, listId, index }.
         */
        function parseYouTubeURL(url) {
            try {
                const u = new URL(url.trim());
                return {
                    videoId: u.searchParams.get('v'),
                    listId: u.searchParams.get('list'),   // may be null
                    index: u.searchParams.get('index')   // may be null
                };
            } catch (err) {
                console.error('Invalid URL:', err);
                return {};
            }
        }

        /**
         * Builds the embed src string for autoplay, looping,
         * muting (required for autoplay), and optional playlist/index.
         */
        function buildEmbedSrc({ videoId, listId, index }) {
            if (!videoId) return '';
            const params = new URLSearchParams({
                autoplay: '1',
                mute: '0',
                loop: listId ? '1' : '0',
                controls: '1',
                modestbranding: '1',
                rel: '0',
                playsinline: '1'
            });
            // If there's a playlist, loop needs playlist=ID
            if (listId) {
                params.set('list', listId);
                // YouTube ignores `index` in embeds, but you can supply it
                if (index) params.set('index', index);
            }
            return `https://www.youtube.com/embed/${videoId}?${params.toString()}`;
        }

        document.getElementById('embed-btn').addEventListener('click', () => {
            const url = document.getElementById('yt-url').value;
            const { videoId, listId, index } = parseYouTubeURL(url);
            if (!videoId) {
                alert('Could not parse a video ID from that URL.');
                return;
            }

            // Create or replace the iframe
            const holder = document.getElementById('yt-embed-holder');
            holder.innerHTML = ''; // clear previous
            const iframe = document.createElement('iframe');
            iframe.width = 560;
            iframe.height = 315;
            iframe.src = buildEmbedSrc({ videoId, listId, index });
            iframe.frameBorder = 0;
            iframe.allow =
                'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
            iframe.allowFullscreen = true;
            iframe.title = 'YouTube video player';

            holder.appendChild(iframe);
        });
    </script>


</body>

</html>